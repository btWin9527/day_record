# lowcode

## 0. 项目初始化

创建vue项目，配置vuex, vue-router, 初始化样式, element-ui

## 1. 页面布局

创建页面布局，包括左侧菜单栏，顶部导航栏，中间编辑区域，右侧属性列表区域

## 2. 定义自定义组件

定义自定义组件，用于拖动到画布区域 (custom-component)

## 3. 拖拽

## 3.1 组件拖拽到画布

操作过程：将左侧的组件拖动到中间的画布区域，然后在画布区域内拖动组件，组件会随着鼠标移动而移动，当鼠标松开时，组件会停留在画布区域内

注意⚠️：

1. 一个元素要可拖拽，需要添加一个属性 `draggable`
2. 拖拽的元素需要添加事件`dragstart`，在拖拽刚开始时触发，将拖拽的组件信息传递给画布
3. `drop`事件，在拖拽结束时触发，用于接受拖拽的组件信息

### 3.2 组件在画布中移动

实现过程：

1. 画布设置为相对定位，组件设置为绝对定位
2. `mousedown`事件监听，记录当前位置
3. `mousemouve`事件监听，计算移动距离
4. `mouseup`事件，鼠标抬起时结束移动

## 4. 删除组件、调整图层层级

主要通过修改当前选中组件的z-index，修改图层层级。删除组件时，通过`splice`方法删除数组中的元素

## 5. 放大、缩小

Shape组件中，添加8个位置的圆点，实现横向、纵向、对角线的放大缩小

## 6. 撤销、重做

主要是通过存储快照，记录编辑器中组件的数据，然后将快照存在在一个数组中。
撤销时，将数组中最后一个快照取出，然后将快照中的数据赋值给组件，重做时，将快照中的数据赋值给组件

## 7. 吸附功能

在拖拽组件的时候，如果它和另一个组件距离比较近，会自动吸附在一块

